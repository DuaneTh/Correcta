---
phase: 11-verification-complete-pre-production
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - lib/i18n/dictionaries.ts
autonomous: true

must_haves:
  truths:
    - "Every key in FR dictionary has a matching key in EN dictionary and vice versa"
    - "No hardcoded user-facing strings exist in .tsx files outside of the i18n dictionary"
    - "All empty states, error messages, and button labels use dict.* references"
  artifacts:
    - path: "lib/i18n/dictionaries.ts"
      provides: "Complete FR/EN translation parity"
      contains: "fr:"
  key_links:
    - from: "app/**/*.tsx"
      to: "lib/i18n/dictionaries.ts"
      via: "dict.* property access"
      pattern: "dict\\."
---

<objective>
Audit FR/EN translation completeness across the entire codebase, identify missing keys, hardcoded strings, and structural mismatches between FR and EN dictionaries — then fix all issues found.

Purpose: Ensure no user sees raw key paths or untranslated strings in production, regardless of locale.
Output: Corrected `lib/i18n/dictionaries.ts` with full FR/EN parity, and any hardcoded strings in .tsx files replaced with dictionary references.
</objective>

<execution_context>
@C:\Users\hugol\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\hugol\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@lib/i18n/dictionaries.ts
@lib/i18n/config.ts
@lib/i18n/server.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Audit dictionary structural parity between FR and EN</name>
  <files>lib/i18n/dictionaries.ts</files>
  <action>
Read `lib/i18n/dictionaries.ts` completely. The file contains a dictionary object with `fr` and `en` top-level keys, each containing nested objects for different sections (login, common, admin, student, teacher, etc.).

Write a systematic comparison:
1. Extract all leaf key paths from the `fr` dictionary (e.g., `login.title`, `admin.school.users.actions.archive`)
2. Extract all leaf key paths from the `en` dictionary
3. Find keys present in FR but missing in EN
4. Find keys present in EN but missing in FR
5. Find keys where one locale has a nested object but the other has a string value (structural mismatch)

For each missing key found:
- If the key exists in FR but not EN: Add a reasonable English translation
- If the key exists in EN but not FR: Add a reasonable French translation
- If structural mismatch: Align to match the more complete structure

Also check for:
- Empty string values ("") that should have content
- Placeholder text that was never translated (e.g., "TODO", "FIXME", "XXX")
- Values that are identical in both languages but shouldn't be (e.g., full sentences, not proper nouns)

Fix ALL issues found directly in `lib/i18n/dictionaries.ts`.
  </action>
  <verify>
Read the file after changes. Manually verify that the `fr` and `en` objects have identical nested key structures. Run `npx tsc --noEmit` to verify no type errors were introduced.
  </verify>
  <done>FR and EN dictionaries have identical key structures. No missing keys, no empty values, no placeholder text. TypeScript compiles without errors.</done>
</task>

<task type="auto">
  <name>Task 2: Detect and fix hardcoded user-facing strings in TSX files</name>
  <files>lib/i18n/dictionaries.ts</files>
  <action>
Search ALL `.tsx` files in `app/` and `components/` for hardcoded user-facing strings that should use the i18n dictionary instead.

Patterns to search for:
1. Hardcoded French strings in JSX: Grep for common French words in JSX context (e.g., "Créer", "Supprimer", "Modifier", "Enregistrer", "Annuler", "Rechercher", "Aucun", "Chargement")
2. Hardcoded English strings in JSX: Grep for common English button/UI text (e.g., "Create", "Delete", "Edit", "Save", "Cancel", "Search", "Loading", "No results")
3. String literals in JSX that are NOT:
   - CSS class names
   - HTML attributes (type, name, id, role, aria-*)
   - Route paths (/api/*, /teacher/*, /student/*)
   - Variable names or keys
   - Console.log messages
   - Error messages in API routes (these are fine as-is)

Exclude from audit:
- `components/ui/` (UI Kit components don't use i18n, they receive text via props)
- `components/exams/graph-editor/` (graph editor uses inline localization pattern, as documented in STATE.md)
- Test files
- `app/internal/` (internal dev tools)

For each hardcoded string found in a page or component that receives `dict` as a prop or has access to the dictionary:
- Add the string to `lib/i18n/dictionaries.ts` under the appropriate section (both FR and EN)
- Replace the hardcoded string with the dictionary reference

For strings in components that do NOT have dictionary access, log them but do not change them if they are passed as props from a parent that does have dictionary access (the parent is responsible for passing translated text).

Be conservative: Only fix clear user-facing text (labels, buttons, headings, messages). Do not touch technical strings, aria-labels that are already fine, or developer-facing content.
  </action>
  <verify>
Grep for the patterns again after fixes to confirm reduction. Run `npx tsc --noEmit` to verify no type errors. Verify that no hardcoded French or English text remains in page-level components that have dictionary access.
  </verify>
  <done>All user-facing strings in page components use dict.* references. No hardcoded French or English text in components that have dictionary access. TypeScript compiles without errors.</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes — no type errors from dictionary changes
2. FR and EN dictionaries have identical nested key structures
3. No hardcoded French text found in page components via grep
4. No hardcoded English text found in page components via grep
</verification>

<success_criteria>
- Zero structural mismatches between FR and EN dictionaries
- All user-facing strings in page-level .tsx files reference the i18n dictionary
- TypeScript compilation succeeds
- No empty or placeholder values in either locale
</success_criteria>

<output>
After completion, create `.planning/phases/11-verification-complete-pre-production/11-01-SUMMARY.md`
</output>
