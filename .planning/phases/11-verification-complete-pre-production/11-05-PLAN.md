---
phase: 11-verification-complete-pre-production
plan: 05
type: execute
wave: 1
depends_on: []
files_modified:
  - app/**/*.tsx
  - components/**/*.tsx
autonomous: true

must_haves:
  truths:
    - "All button elements in page components use the Button UI Kit component"
    - "All card-like containers use the Card UI Kit component"
    - "All badge/status indicators use Badge or StatusBadge UI Kit components"
    - "All empty states use the EmptyState UI Kit component"
    - "All form inputs follow UI Kit Form patterns"
  artifacts:
    - path: "components/ui/Button.tsx"
      provides: "Button component with variants"
      exports: ["Button"]
    - path: "components/ui/Card.tsx"
      provides: "Card component"
      exports: ["Card"]
    - path: "components/ui/EmptyState.tsx"
      provides: "Empty state component"
      exports: ["EmptyState"]
  key_links:
    - from: "app/**/*.tsx"
      to: "components/ui/Button.tsx"
      via: "import { Button }"
      pattern: "from.*@/components/ui/Button"
---

<objective>
Audit all page and component files for UI Kit consistency — identify places using raw HTML/Tailwind patterns instead of UI Kit components — then migrate them to use the design system.

Purpose: Ensure 100% visual consistency across all pages using the established UI Kit component library.
Output: All pages use Button, Card, Badge, EmptyState, Form, Text, Layout components from `components/ui/` instead of raw HTML equivalents.
</objective>

<execution_context>
@C:\Users\hugol\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\hugol\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@components/ui/Button.tsx
@components/ui/Card.tsx
@components/ui/Badge.tsx
@components/ui/StatusBadge.tsx
@components/ui/EmptyState.tsx
@components/ui/Form.tsx
@components/ui/Layout.tsx
@components/ui/Text.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Audit raw button and card patterns in app pages</name>
  <files>app/**/*.tsx</files>
  <action>
Search ALL `.tsx` files in `app/` (excluding `app/internal/` and `app/test-math-editor/`) for raw HTML patterns that should use UI Kit components.

**Pattern 1: Raw buttons**
Search for `<button` elements that are NOT inside `components/ui/Button.tsx` itself.
- Each `<button` in a page or client component should be `<Button` from UI Kit
- Exceptions: Form submit buttons that are INSIDE a `<Form>` component may use native button if required by form library
- Exceptions: `components/exams/graph-editor/` uses raw elements for canvas controls (acceptable)

**Pattern 2: Raw card containers**
Search for `<div className="...rounded...border...bg-white` patterns that look like card containers.
- These should use `<Card>` or `<Surface>` from UI Kit
- Exceptions: Highly custom layouts where Card abstraction doesn't fit

**Pattern 3: Raw badge patterns**
Search for `<span className="...rounded-full...text-xs` or similar badge patterns.
- These should use `<Badge>` or `<StatusBadge>` from UI Kit

**Pattern 4: Missing EmptyState**
Search for patterns like "Aucun" or "No " followed by rendering of empty-state messages.
- Verify they use `<EmptyState>` component
- If custom empty state divs exist, replace with `<EmptyState>`

For each violation found:
1. Import the appropriate UI Kit component
2. Replace the raw HTML with the UI Kit equivalent
3. Map existing Tailwind classes to the closest variant/size props
4. Preserve all event handlers and dynamic behavior

Be conservative with graph editor components (`components/exams/graph-editor/`) — they use canvas-specific patterns that should not be changed.
  </action>
  <verify>
Grep for `<button` in `app/` pages (excluding UI Kit, graph editor, internal) — count should be zero or minimal. Grep for Button import — count should cover all pages with buttons. Run `npx tsc --noEmit`.
  </verify>
  <done>All button elements in app pages use Button component. All card-like containers use Card/Surface. All badge patterns use Badge/StatusBadge. TypeScript compiles.</done>
</task>

<task type="auto">
  <name>Task 2: Audit raw patterns in non-graph-editor components</name>
  <files>components/**/*.tsx</files>
  <action>
Search `.tsx` files in `components/` (excluding `components/ui/` and `components/exams/graph-editor/`) for the same patterns:

**Shared components to audit:**
- `components/exams/MathRenderer.tsx`
- `components/exams/SegmentedMathField.tsx`
- `components/exams/builder/SectionList.tsx`
- Any other components in `components/exams/` outside graph-editor

**Patterns to check:**
1. `<button` elements that should be `<Button>`
2. Raw card/panel divs that should be `<Card>` or `<Surface>`
3. Raw input elements that should use Form components
4. Inconsistent text sizing — headings should use `<Text>` component or at minimum consistent Tailwind text classes

**Text consistency check:**
- Search for inline `className="text-2xl"` or `className="text-xl"` patterns on heading elements
- These should ideally use `<Text>` component with `pageTitle`, `sectionTitle`, or `label` variants
- Only fix clear violations — do not change every text element, focus on page headings and section titles

For each component with violations:
1. Import the UI Kit component
2. Replace raw HTML with UI Kit equivalent
3. Verify the component's existing props/behavior is preserved

Skip `components/exams/graph-editor/` entirely — it uses specialized canvas patterns with Konva.
  </action>
  <verify>
Grep for `<button` in `components/` (excluding ui/ and graph-editor/) — count should be zero or minimal with documented exceptions. Run `npx tsc --noEmit`.
  </verify>
  <done>All shared components use UI Kit components. No raw button/card/badge patterns outside of graph-editor and UI Kit source. TypeScript compiles.</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes
2. Grep `<button` in `app/` pages (excluding internal, graph-editor, ui) returns zero or documented exceptions
3. All page-level components import from `@/components/ui/`
4. No raw card containers (rounded+border+bg-white) outside of UI Kit and graph-editor
</verification>

<success_criteria>
- Zero raw `<button` elements in page components (all use `<Button>`)
- Zero raw card patterns in page components (all use `<Card>` or `<Surface>`)
- Badge and status indicators use `<Badge>` or `<StatusBadge>`
- Empty states use `<EmptyState>` component
- TypeScript compilation succeeds
- Graph editor components are excluded and untouched
</success_criteria>

<output>
After completion, create `.planning/phases/11-verification-complete-pre-production/11-05-SUMMARY.md`
</output>
