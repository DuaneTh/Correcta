---
phase: 06-ui-kit-integration
plan: 06
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - components/grading/GradeDistributionPanel.tsx
  - components/grading/AttemptDetailModal.tsx
  - components/grading/RubricReviewModal.tsx
  - components/grading/GradeAllButton.tsx
autonomous: true

must_haves:
  truths:
    - "GradeDistributionPanel uses Card and Badge for chart/stats display"
    - "AttemptDetailModal uses UI Kit components inside its modal body"
    - "RubricReviewModal uses Card and Text for rubric criteria display"
    - "GradeAllButton uses Button component with loading/progress state"
  artifacts:
    - path: "components/grading/GradeDistributionPanel.tsx"
      provides: "Migrated grade distribution display"
      contains: "import.*Card.*from.*@/components/ui/Card"
    - path: "components/grading/AttemptDetailModal.tsx"
      provides: "Migrated attempt detail modal"
      contains: "import.*Text.*from.*@/components/ui/Text"
    - path: "components/grading/RubricReviewModal.tsx"
      provides: "Migrated rubric review modal"
      contains: "import.*Badge.*from.*@/components/ui/Badge"
    - path: "components/grading/GradeAllButton.tsx"
      provides: "Migrated grade all button"
      contains: "import.*Button.*from.*@/components/ui/Button"
  key_links:
    - from: "components/grading/GradeAllButton.tsx"
      to: "components/ui/Button.tsx"
      via: "import"
      pattern: "import.*Button.*from.*@/components/ui/Button"
---

<objective>
Migrate the 4 largest grading components (GradeDistributionPanel, AttemptDetailModal, RubricReviewModal, GradeAllButton) to UI Kit.

Purpose: These are the most complex grading components. GradeDistributionPanel alone is 1200 lines with chart-like display. Migrating them with focused attention ensures quality.

Output: 4 migrated grading components with consistent UI Kit usage.
</objective>

<execution_context>
@C:\Users\hugol\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\hugol\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@components/ui/Button.tsx
@components/ui/Card.tsx
@components/ui/Text.tsx
@components/ui/Layout.tsx
@components/ui/Badge.tsx
@components/ui/Form.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate GradeDistributionPanel.tsx (1200 lines)</name>
  <files>components/grading/GradeDistributionPanel.tsx</files>
  <action>
    This is the largest grading component. It displays grade distribution statistics with charts/bars.

    Migration targets:
    - Section headers → Text variant="sectionTitle"
    - Stat cards → Card + CardBody with StatPill or Text for numbers
    - Container divs → Surface or Card
    - Inline layouts → Inline component
    - Vertical stacking → Stack component
    - Score labels → Text variant="caption" or Text variant="muted"
    - Status indicators → Badge variants
    - Button actions → Button component
    - Grid layouts → Grid component
    - Score color coding (green/yellow/red) → keep the color logic but apply via cn() and className on Badge or Text

    IMPORTANT: This component likely has custom chart/bar rendering with specific pixel/percentage widths. Do NOT try to force these into UI Kit components. Only migrate the structural elements (headers, containers, labels, buttons). Keep chart-specific divs with their Tailwind classes.

    Pattern: Replace structural HTML (containers, headers, buttons, labels) with UI Kit. Keep visual/chart-specific HTML intact.
  </action>
  <verify>Run `npx tsc --noEmit` — zero errors. File imports from @/components/ui/. Chart rendering logic intact.</verify>
  <done>GradeDistributionPanel migrated. Structural elements use UI Kit. Chart-specific rendering preserved.</done>
</task>

<task type="auto">
  <name>Task 2: Migrate AttemptDetailModal, RubricReviewModal, GradeAllButton</name>
  <files>
    components/grading/AttemptDetailModal.tsx
    components/grading/RubricReviewModal.tsx
    components/grading/GradeAllButton.tsx
  </files>
  <action>
    **AttemptDetailModal.tsx (417 lines):**
    Modal showing full attempt details:
    - Modal likely uses existing Drawer or custom modal — keep modal wrapper as-is
    - Student info → Inline with Text for name + Badge for status
    - Question sections → Stack of Card + CardBody
    - Answer display → Surface + Text (preserve MathRenderer)
    - Score display → Badge variants for score coloring
    - Action buttons → Button variants
    - Close button → Button variant="ghost"

    **RubricReviewModal.tsx (359 lines):**
    Modal showing AI-generated rubric for review:
    - Modal wrapper → keep existing
    - Rubric criteria list → Stack of Card + CardBody
    - Criteria labels → Text variant="label" or Text variant="sectionTitle"
    - Score ranges → Badge or Text variant="caption"
    - Approve/reject buttons → Button variant="primary" and Button variant="secondary"
    - Criteria descriptions → Text variant="body"

    **GradeAllButton.tsx (337 lines):**
    Button with progress tracking for batch grading:
    - Main button → Button variant="primary" (replace raw button HTML)
    - Progress state → keep existing progress logic
    - Loading/disabled state → use Button's disabled prop + cn() for visual state
    - Confirmation trigger → use existing ConfirmModal pattern
    - Status text → Text variant="caption"
    - Progress display → keep custom progress bar, wrap in Surface or Card

    IMPORTANT: Preserve all modal behavior (open/close, focus trap), MathRenderer integration, BullMQ job tracking, and confirmation flows.
  </action>
  <verify>Run `npx tsc --noEmit` — zero errors. All 3 files import from @/components/ui/. Modal functionality preserved.</verify>
  <done>AttemptDetailModal, RubricReviewModal, and GradeAllButton migrated to UI Kit. Modal and grading logic preserved.</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes
2. All 4 files import from @/components/ui/*
3. GradeDistributionPanel chart rendering preserved
4. Modal open/close/focus behavior unchanged
5. GradeAllButton progress tracking works
</verification>

<success_criteria>
- 4 largest grading components use UI Kit for structural elements
- Chart/progress rendering preserved
- Modal behavior unchanged
</success_criteria>

<output>
After completion, create `.planning/phases/06-ui-kit-integration/06-06-SUMMARY.md`
</output>
