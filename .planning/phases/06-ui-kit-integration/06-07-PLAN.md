---
phase: 06-ui-kit-integration
plan: 07
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - components/grading/GradeEditModal.tsx
  - components/grading/GradingProgressModal.tsx
  - components/grading/RubricEditor.tsx
  - components/grading/CorrectionsList.tsx
  - components/grading/ReGradeButton.tsx
  - components/export/ExportProgressModal.tsx
autonomous: true

must_haves:
  truths:
    - "GradeEditModal form fields use Input/Textarea from Form"
    - "GradingProgressModal uses Text and Badge for progress display"
    - "ExportProgressModal uses Button and progress elements from UI Kit"
    - "All small grading components use consistent Button and Text patterns"
  artifacts:
    - path: "components/grading/GradeEditModal.tsx"
      provides: "Migrated grade editing modal"
      contains: "import.*Input.*from.*@/components/ui/Form"
    - path: "components/grading/GradingProgressModal.tsx"
      provides: "Migrated grading progress display"
      contains: "import.*Text.*from.*@/components/ui/Text"
    - path: "components/export/ExportProgressModal.tsx"
      provides: "Migrated export progress modal"
      contains: "import.*Button.*from.*@/components/ui/Button"
  key_links:
    - from: "components/grading/GradeEditModal.tsx"
      to: "components/ui/Form.tsx"
      via: "form component imports"
      pattern: "import.*from.*@/components/ui/Form"
---

<objective>
Migrate the remaining 6 smaller grading/export modal components to UI Kit.

Purpose: Completes UIKIT-05 (modal consolidation). These are all under 350 lines each, making them efficient to batch together.

Output: 6 fully migrated modal/component files.
</objective>

<execution_context>
@C:\Users\hugol\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\hugol\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@components/ui/Button.tsx
@components/ui/Card.tsx
@components/ui/Text.tsx
@components/ui/Layout.tsx
@components/ui/Badge.tsx
@components/ui/Form.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate GradeEditModal, GradingProgressModal, and RubricEditor</name>
  <files>
    components/grading/GradeEditModal.tsx
    components/grading/GradingProgressModal.tsx
    components/grading/RubricEditor.tsx
  </files>
  <action>
    **GradeEditModal.tsx (270 lines):**
    Modal for editing individual student grades:
    - Modal wrapper → keep existing
    - Score input → Input from Form (type="number")
    - Feedback textarea → Textarea from Form
    - Labels → Text variant="label"
    - Context info (question text, student answer) → Surface tone="subtle" + Text
    - Save/cancel buttons → Button variant="primary" + Button variant="secondary"
    - Layout → Stack for form fields, Inline for button row
    - Score range display → Text variant="caption"

    **GradingProgressModal.tsx (322 lines):**
    Modal showing batch grading progress:
    - Modal wrapper → keep existing
    - Progress text (X of Y) → Text variant="sectionTitle" or Text variant="body"
    - Progress bar → keep custom progress bar HTML (not a UI Kit pattern)
    - Phase labels → Badge for current phase
    - Student being graded → Text variant="body"
    - Completion status → Badge variant="success"
    - Cancel/close buttons → Button variants
    - Error display → Text variant="caption" with className for red color

    **RubricEditor.tsx (246 lines):**
    Editor for rubric criteria:
    - Criteria list → Stack
    - Each criterion → Card + CardBody
    - Criterion fields → Input + Textarea from Form
    - Score range inputs → Input from Form with type="number"
    - Add/remove buttons → Button variant="ghost" for remove, Button variant="secondary" for add
    - Labels → Text variant="label"
    - Layout → Stack for vertical, Inline for score range row
  </action>
  <verify>Run `npx tsc --noEmit` — zero errors. All 3 files import from @/components/ui/.</verify>
  <done>GradeEditModal, GradingProgressModal, RubricEditor migrated to UI Kit. Form fields use Input/Textarea.</done>
</task>

<task type="auto">
  <name>Task 2: Migrate CorrectionsList, ReGradeButton, and ExportProgressModal</name>
  <files>
    components/grading/CorrectionsList.tsx
    components/grading/ReGradeButton.tsx
    components/export/ExportProgressModal.tsx
  </files>
  <action>
    **CorrectionsList.tsx (189 lines):**
    List of corrections for a question:
    - List container → Stack
    - Each correction item → Card + CardBody or Surface
    - Score display → Badge
    - Student name → Text variant="body"
    - Correction status → Badge variant (success/warning/neutral)
    - Action links → TextLink or Button variant="ghost"

    **ReGradeButton.tsx (86 lines):**
    Button to trigger re-grading:
    - Main button → Button variant="secondary" or Button variant="ghost"
    - Loading state → use Button's disabled prop + loading text
    - Confirmation → uses ConfirmModal (keep existing pattern)
    - Status text → Text variant="caption"

    **ExportProgressModal.tsx (163 lines):**
    Modal showing PDF export progress:
    - Modal wrapper → keep existing
    - Progress display → Text for percentage + keep custom progress bar
    - Phase labels → Badge or Text variant="caption"
    - Download button (on completion) → Button variant="primary"
    - Cancel button → Button variant="secondary"
    - Status message → Text variant="body"
    - Error state → Text variant="caption" with red styling
    - Layout → Stack for vertical arrangement

    IMPORTANT: Preserve all modal open/close behavior, progress polling logic, and download URL handling.
  </action>
  <verify>Run `npx tsc --noEmit` — zero errors. All 3 files import from @/components/ui/.</verify>
  <done>CorrectionsList, ReGradeButton, ExportProgressModal migrated. UIKIT-05 (modals) complete across Plans 06 and 07.</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes
2. All 6 files import from @/components/ui/*
3. Modal behavior (open/close/focus) preserved
4. Progress tracking logic unchanged
5. Form fields use Input/Textarea/Select from Form
</verification>

<success_criteria>
- All 6 smaller grading/export components migrated
- Combined with Plan 06, UIKIT-05 (modal consolidation) is complete
- Consistent form patterns using Input/Textarea from UI Kit
</success_criteria>

<output>
After completion, create `.planning/phases/06-ui-kit-integration/06-07-SUMMARY.md`
</output>
