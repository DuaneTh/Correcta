---
phase: 06-ui-kit-integration
plan: 02
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - app/admin/InstitutionsClient.tsx
  - app/admin/school/classes/SchoolClassesClient.tsx
  - app/admin/school/users/SchoolUsersClient.tsx
autonomous: true

must_haves:
  truths:
    - "Platform admin institutions page uses Button, Card, Text, Layout instead of raw HTML"
    - "School classes page uses UI Kit components for cards, buttons, badges, and layout"
    - "School users page uses UI Kit components for user list, forms in Drawer, and action buttons"
  artifacts:
    - path: "app/admin/InstitutionsClient.tsx"
      provides: "Migrated institutions management page"
      contains: "import.*Button.*from.*components/ui/Button"
    - path: "app/admin/school/classes/SchoolClassesClient.tsx"
      provides: "Migrated classes management page"
      contains: "import.*Card.*from.*components/ui/Card"
    - path: "app/admin/school/users/SchoolUsersClient.tsx"
      provides: "Migrated users management page"
      contains: "import.*Text.*from.*components/ui/Text"
  key_links:
    - from: "app/admin/InstitutionsClient.tsx"
      to: "components/ui/Button.tsx"
      via: "import"
      pattern: "import.*Button.*from.*@/components/ui/Button"
    - from: "app/admin/school/classes/SchoolClassesClient.tsx"
      to: "components/ui/Card.tsx"
      via: "import"
      pattern: "import.*Card.*CardBody.*from.*@/components/ui/Card"
---

<objective>
Migrate the three largest admin pages (InstitutionsClient, SchoolClassesClient, SchoolUsersClient) from raw HTML/Tailwind to UI Kit components.

Purpose: These are the highest-line-count admin pages (~2900 lines total). Migrating them establishes the admin migration pattern and covers the most impactful pages first.

Output: Three fully migrated admin pages using Button, Card, CardBody, Text, Stack, Inline, Grid, Badge, Input, Select, SearchField, and EmptyState components.
</objective>

<execution_context>
@C:\Users\hugol\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\hugol\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@app/teacher/courses/TeacherCoursesClient.tsx (reference implementation)
@components/ui/Button.tsx
@components/ui/Card.tsx
@components/ui/Text.tsx
@components/ui/Layout.tsx
@components/ui/Badge.tsx
@components/ui/Form.tsx
@components/ui/SearchField.tsx
@components/ui/EmptyState.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate InstitutionsClient.tsx (~795 lines)</name>
  <files>app/admin/InstitutionsClient.tsx</files>
  <action>
    Read the current file and the reference implementation (TeacherCoursesClient.tsx). Apply the UI Kit migration pattern:

    1. **Imports**: Add UI Kit imports (Button, Card, CardBody, Text, Stack, Inline, Grid, Badge, Input, Select, SearchField, EmptyState). Remove any raw Tailwind patterns that UI Kit replaces.

    2. **Replace patterns** (follow TeacherCoursesClient reference):
       - `<h1 className="text-3xl font-bold text-brand-900">` → `<Text as="h1" variant="pageTitle">`
       - `<h2 className="text-lg font-semibold...">` → `<Text as="h2" variant="sectionTitle">`
       - `<p className="text-sm text-gray-500">` → `<Text variant="caption">` or `<Text variant="muted">`
       - `<button className="...bg-brand-900...">` → `<Button variant="primary">`
       - `<button className="...border border-gray-...">` → `<Button variant="secondary">`
       - `<button className="...text-red...">` or destructive → `<Button variant="destructive">`
       - `<button className="...hover:bg-gray-100...">` (icon buttons) → `<Button variant="ghost" size="xs">`
       - `<div className="rounded-lg border border-gray-200 bg-white shadow-sm...">` → `<Card>` with `<CardBody>`
       - `<div className="flex flex-col gap-N">` → `<Stack gap="...">`
       - `<div className="flex items-center justify-between">` → `<Inline align="between">`
       - `<div className="grid grid-cols-...">` → `<Grid cols="...">`
       - Search inputs with icon → `<SearchField>`
       - `<input className="rounded-md border...">` → `<Input>` from Form
       - `<select className="...">` → `<Select>` from Form
       - Status badges with colored spans → `<Badge variant="...">` or `<StatusBadge>`
       - Empty state divs → `<EmptyState title="..." description="...">`

    3. **Keep intact**: All logic (useState, useEffect, fetch, handlers), Drawer usage (already UI Kit), ConfirmModal usage (already UI Kit), any complex custom layouts that don't map cleanly to UI Kit primitives.

    4. **DO NOT**: Change any business logic, API calls, state management, or event handlers. This is a visual-only refactor.
  </action>
  <verify>Run `npx tsc --noEmit` — zero TypeScript errors. Grep for remaining raw `<button className=` patterns — should be zero or near-zero (only edge cases).</verify>
  <done>InstitutionsClient.tsx uses UI Kit components throughout. No raw button/card/badge HTML patterns remain. TypeScript compiles clean.</done>
</task>

<task type="auto">
  <name>Task 2: Migrate SchoolClassesClient.tsx (~1252 lines) and SchoolUsersClient.tsx (~853 lines)</name>
  <files>
    app/admin/school/classes/SchoolClassesClient.tsx
    app/admin/school/users/SchoolUsersClient.tsx
  </files>
  <action>
    Apply the same UI Kit migration pattern as Task 1 to both files. These pages share similar structure (list + Drawer forms + ConfirmModal for delete).

    **SchoolClassesClient.tsx (1252 lines):**
    - Page header with title and create button → Text + Button + Inline
    - Class cards with badges → Card + CardBody + Badge
    - Search/filter area → SearchField + Select
    - Empty states → EmptyState
    - Form fields in Drawer → Input, Select, Textarea from Form
    - Action buttons (edit, delete) → Button with variant="ghost" or variant="destructive"
    - Hierarchical class display (parent/child) → Stack with nested Card components
    - Stats display → StatPill where applicable

    **SchoolUsersClient.tsx (853 lines):**
    - User list with search → SearchField + Grid/Stack
    - User cards/rows → Card + CardBody + Inline
    - Role badges → Badge (neutral for student, info for teacher, success for admin)
    - Drawer form fields → Input, Select from Form
    - Action buttons → Button variants
    - Empty state when no users → EmptyState

    Same rules apply: keep all logic intact, only replace raw HTML with UI Kit components. Follow TeacherCoursesClient.tsx as reference.
  </action>
  <verify>Run `npx tsc --noEmit` — zero TypeScript errors. Check both files have UI Kit imports and minimal raw className patterns for common elements.</verify>
  <done>SchoolClassesClient.tsx and SchoolUsersClient.tsx fully migrated to UI Kit components. Both compile clean with no raw button/card/badge HTML.</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes
2. All three files import from @/components/ui/*
3. No raw `<button className="...bg-brand-900..."` patterns remain
4. No raw card-like div patterns remain
5. Existing Drawer/ConfirmModal usage preserved
</verification>

<success_criteria>
- InstitutionsClient, SchoolClassesClient, SchoolUsersClient use UI Kit components
- Zero raw HTML button/card/badge patterns for common UI elements
- All existing functionality preserved (forms, modals, search, CRUD operations)
</success_criteria>

<output>
After completion, create `.planning/phases/06-ui-kit-integration/06-02-SUMMARY.md`
</output>
